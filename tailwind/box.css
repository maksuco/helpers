@layer base {

	.box,
	.box-xxs,
	.box-xs,
	.box-sm,
	.box-lg,
	.box-xl,
	.box-2xl {
		@apply relative bg-white dark:bg-default-900/40 backdrop-blur-sm border border-default-300 dark:border-default-800;
	}

	.box-50,
	.box-100,
	.box-800,
	.box-900,
	.box-950 {
		@apply bg-linear-160 from-60%;
	}

	.box-brand-500,
	.box-brand-600,
	.box-brand-800,
	.box-brand-900 {
		@apply bg-linear-to-br from-20%;
	}

	.rounded-box {
		border-radius: var(--box-radius) !important;
	}
}

@utility box-xxs {
	--box-radius: calc(var(--box-radius-base) * 0.44);
	border-radius: var(--box-radius);
	@apply px-2 pt-1.5 lg:px-2 lg:pt-2;
	padding-bottom: calc((var(--spacing) * 1.5) - 1px);

	@media (width >=64rem) {
		--box-radius: calc(var(--box-radius-base) * 0.49);
		padding-bottom: calc((var(--spacing) * 2) - 1px);
	}
}

@utility box-xs {
	--box-radius: calc(var(--box-radius-base) * 0.60);
	border-radius: var(--box-radius);
	@apply px-2.5 pt-2 lg:px-3 lg:pt-3;
	padding-bottom: calc((var(--spacing) * 2) - 1px);

	@media (width >=64rem) {
		--box-radius: calc(var(--box-radius-base) * 0.65);
		padding-bottom: calc((var(--spacing) * 3) - 1px);
	}
}

@utility box-sm {
	--box-radius: calc(var(--box-radius-base) * 0.75);
	border-radius: var(--box-radius);
	@apply px-3 pt-4 pb-3.5 lg:px-5 lg:py-4;

	@media (width >=64rem) {
		--box-radius: calc(var(--box-radius-base) * 0.80);
	}
}

@utility box {
	--box-radius: calc(var(--box-radius-base) * 0.95);
	border-radius: var(--box-radius);
	@apply pl-4 pr-4 pt-5 pb-4 lg:px-6 lg:py-5;

	@media (width >=64rem) {
		--box-radius: var(--box-radius-base);
	}
}

@utility box-lg {
	--box-radius: calc((var(--box-radius-base) * 1.20) - 1px);
	border-radius: var(--box-radius);
	@apply px-5 pt-6 pb-5 lg:px-8 lg:pt-6 lg:pb-6;

	@media (width >=64rem) {
		--box-radius: calc(var(--box-radius-base) * 1.25);
	}
}

@utility box-xl {
	--box-radius: calc(var(--box-radius-base) * 1.40);
	border-radius: var(--box-radius);
	@apply px-6 pt-7 pb-6 lg:px-10 lg:pt-8 lg:pb-7;

	@media (width >=64rem) {
		--box-radius: calc(var(--box-radius-base) * 1.45);
	}
}

@utility box-2xl {
	--box-radius: calc(var(--box-radius-base) * 1.60);
	border-radius: var(--box-radius);
	@apply px-7 lg:px-14 pt-9 pb-9 lg:py-10;

	@media (width >=64rem) {
		--box-radius: calc(var(--box-radius-base) * 1.65);
	}
}

@utility box-50 {
	@apply text-default-500;
	@apply from-default-50 to-white;
	@apply border-default-200/80 dark:border-default-500/80;
}

@utility box-100 {
	--tw-gradient-to: color-mix(in oklch, color-mix(in oklch, var(--color-brand-400) 25%, var(--color-default-400)) 14%, white 95%);
	@apply text-default-600;
	@apply from-default-100;
	@apply border-default-300/80 dark:border-default-600/80;
}

@utility box-800 {
	--tw-gradient-from: color-mix(in oklch, var(--color-brand-100) 12%, var(--color-default-900));
	@apply text-default-300;
	@apply to-default-800;
	@apply border-default-400/80 dark:border-default-500/80;
}

@utility box-900 {
	@apply text-default-200;
	@apply from-default-900 to-default-950;
	@apply border-default-400/80 dark:border-default-600/80;
}

@utility box-950 {
	@apply text-default-100;
	@apply from-default-950 to-black;
	@apply border-default-600/80 dark:border-default-700/80;
}

@utility box-brand-500 {
	@apply from-brand-500 to-brand-300;
	@apply border-brand-200/80 dark:border-brand-500/80;
}

@utility box-brand-600 {
	@apply from-brand-600 to-brand-400;
	@apply border-brand-300/80 dark:border-brand-600/80;
}

@utility box-brand-800 {
	@apply from-brand-800 to-brand-500 from-45%;
	@apply border-brand-500/80 dark:border-brand-800/80;
}

@utility box-brand-900 {
	@apply from-brand-900 to-brand-600 from-45%;
	@apply border-brand-600/80 dark:border-brand-900/80;
}

@layer components {
	.box-bg-overlay {
		transition:
			background 0.9s ease-in-out,
			background-position 0.5s ease-in-out,
			background-size 0.5s ease-in-out;
		will-change: transform, background-size, background-position;
		background: linear-gradient(var(--gradient-direction, to bottom),
				var(--tw-gradient-from) var(--tw-gradient-from-position, 10%),
				var(--tw-gradient-to) var(--tw-gradient-to-position, 80%)), var(--bg-image) no-repeat;

		background-size: cover, var(--bg-size, cover);
		background-position: center, var(--bg-position, center 55%);

		&:hover,
		&:focus-within,
		.group:hover & {
			background-position: center, var(--bg-position-hover, center 45%);
		}

		@media (width >=48rem) {
			background: linear-gradient(var(--gradient-direction-lg, var(--gradient-direction, to bottom)),
					var(--tw-gradient-from) var(--tw-gradient-from-position, 10%),
					var(--tw-gradient-to) var(--tw-gradient-to-position, 80%)), var(--bg-image) no-repeat;
			background-size: cover, var(--bg-size-lg, var(--bg-size, cover));
			background-position: center, var(--bg-position-lg, var(--bg-position, center 55%));

			&:hover,
			&:focus-within,
			.group:hover & {
				background-position: center, var(--bg-position-hover-lg, var(--bg-position-hover, center 45%));
			}
		}
	}

	.dropdown {
		@apply absolute z-50 min-w-48 py-1 isolate overflow-hidden;
		@apply bg-white/95 dark:bg-default-900/90 backdrop-blur-md;
		@apply border border-default-200 dark:border-default-700/80;
		@apply shadow-brand-900/10 dark:shadow-brand-400/30;
		box-shadow: 0px 0px 10px -2px var(--tw-shadow-color);
		--box-radius: calc(var(--btn-radius) + 4px);
		border-radius: var(--box-radius);
		animation: dropdown 0.25s ease-out;

		/* Scrollable variant */
		&.dropdown-scroll {
			max-height: 320px;
			overflow-y: auto;
		}

		/* Header */
		.dropdown-header {
			@apply px-3.5 py-2.5 border-b border-default-100 dark:border-default-800;
			@apply bg-default-100/80 dark:bg-default-800/50;
			@apply text-sm font-semibold text-default-700 dark:text-default-200;
			margin-top: -0.25rem;
			margin-bottom: 0.25rem;
		}

		/* Footer */
		.dropdown-footer {
			@apply px-3.5 py-2.5 border-t border-default-100 dark:border-default-800;
			@apply bg-default-50/80 dark:bg-default-800/50;
			@apply text-sm text-default-500 dark:text-default-400;
			margin-bottom: -0.25rem;
			margin-top: 0.25rem;
		}

		/* Divider */
		.dropdown-divider {
			@apply h-px my-1.5 mx-2;
			@apply bg-default-100 dark:bg-default-800;
		}

		/* Group */
		.dropdown-group {
			@apply py-1 px-1 gap-px space-y-px;

			&+.dropdown-group {
				@apply border-t border-default-100 dark:border-default-800;
			}

			.dropdown-item {
				@apply px-3;
				border-radius: var(--btn-radius);
			}
		}

		.dropdown-group-label {
			@apply px-3.5 py-1.5 -ml-0.5 text-[11px] font-bold uppercase tracking-wider;
			@apply text-default-400 dark:text-default-500;
		}

		/* Item */
		.dropdown-item {
			@apply flex items-center gap-2 w-full px-3.5 py-2 text-[0.9rem];
			@apply text-default-700 dark:text-default-300;
			@apply select-none transition-all duration-150;

			&:hover {
				@apply bg-default-100 dark:bg-default-800;
				@apply text-default-900 dark:text-white;
			}

			&:active {
				@apply bg-default-200 dark:bg-default-700;
			}

			&:focus {
				@apply outline-none bg-default-100 dark:bg-default-800;
			}

			.badge {
				@apply text-[13px] font-semibold py-1 px-1.5 leading-none -ml-1;
			}

			&:has(.badge) {
				@apply gap-[8px];
			}

			/* Icons */
			svg,
			.dropdown-icon {
				@apply w-4 h-4 shrink-0;
				@apply text-default-400 dark:text-default-500;
				transition: color 0.15s;
			}

			&:hover svg,
			&:hover .dropdown-icon {
				@apply text-default-600 dark:text-default-300;
			}

			.dropdown-icon-right {
				@apply ml-auto;
			}

			/* Active state */
			&.active,
			&[aria-selected="true"] {
				@apply bg-brand/10 dark:bg-brand/20;
				@apply text-brand dark:text-brand-300;

				svg {
					@apply text-brand dark:text-brand-400;
				}
			}

			/* Disabled state */
			&.disabled,
			&[disabled] {
				@apply opacity-50 pointer-events-none cursor-not-allowed;
			}

			/* With checkbox */
			&.dropdown-item-check {
				@apply gap-3;

				&::before {
					content: '';
					@apply w-4 h-4 rounded border-2 border-default-300 dark:border-default-600 shrink-0;
					transition: all 0.15s;
				}

				&.checked::before,
				&[aria-checked="true"]::before {
					@apply bg-brand border-brand;
					background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
					background-size: 100%;
				}
			}

			/* Multi-line content */
			.dropdown-item-content {
				@apply flex flex-col gap-0.5;
			}

			.dropdown-item-text {
				@apply text-[0.9rem] leading-tight;
			}

			.dropdown-item-desc {
				@apply text-xs text-default-500 leading-tight;
			}

			/* Keyboard shortcut */
			.dropdown-shortcut {
				@apply ml-auto text-xs text-default-400 dark:text-default-600 font-mono;
			}
		}
	}
}

@utility bento {
	grid-auto-rows: min-content;
	@apply w-full grid grid-cols-2 lg:grid-cols-12 lg:auto-rows-[300px] gap-3 lg:gap-4;

	* {
		@apply lg:col-span-4;
	}
}


@layer base {
	.alert {
		@apply border flex items-start gap-3 text-sm leading-none;

		.alert-title {
			@apply text-base font-semibold mb-0.5 -mt-0.5 block;
		}

		svg {
			@apply size-5 md:size-6 shrink-0 -ml-1;
		}
	}

	.modal {
		@apply fixed inset-0 left-0 flex justify-center items-center overflow-hidden outline-none;
		z-index: 900;
		height: 100vh;

		.modal-box {
			@apply flex flex-col relative w-fit max-h-full transition-all bg-frosted bg-white/90 dark:bg-default-900/95;
			z-index: 920;
			padding: 0px;
			border-radius: calc(var(--box-radius) - 3px);

			.modal-btns {
				@apply absolute top-1.5 right-1.5 flex justify-end items-stretch gap-1.5;
				z-index: 100;
			}

			.modal-close {
				@apply btn-default font-bold border border-black/10 dark:border-white/10 cursor-pointer opacity-80 hover:opacity-100;
				border-radius: calc(var(--box-radius) - 3px);
				padding: 0.2rem;

				svg {
					@apply size-5 md:size-6;
				}
			}

			.modal-title {
				@apply absolute top-0 left-0 w-full bg-linear-to-b from-white/70 dark:from-black/40 from-60% to-transparent z-10;
				@apply px-5 md:px-8 pt-5 md:pt-6 pb-6 md:pb-8 mt-3 md:-mt-1;
				border-top-left-radius: calc(var(--box-radius) - 3px);
				border-top-right-radius: calc(var(--box-radius) - 3px);
				font-size-adjust: 0.4;
			}

			.modal-body {
				@apply flex-grow pt-7 md:pt-8 pb-7 md:pb-9 px-3 md:px-5 lg:px-7;
				overflow-y: auto;
				/*HIDE SCROLL BAR*/
				-ms-overflow-style: none;
				-webkit-overflow-scrolling: touch;
				scrollbar-width: none;

				&::-webkit-scrollbar {
					display: none;
					/* Safari and Chrome */
				}

				border-radius: var(--box-radius);
			}

			.modal-footer {
				@apply px-2 md:px-4.5 bg-default-100/90 dark:bg-default-800/90 border-t border-default-300/10;
				border-bottom-left-radius: calc(var(--box-radius) - 3px);
				border-bottom-right-radius: calc(var(--box-radius) - 3px);

				.modal-footer-row {
					@apply flex justify-end items-center gap-2 py-2 md:py-2.5 scroll-x;
				}
			}

			&.allow-dark {
				@apply dark:bg-dark dark:text-white;

				.modal-title {
					@apply dark:from-dark;
				}

				.modal-footer {
					@apply dark:from-dark;
				}
			}
		}
	}

	.modal-full {
		.modal-box {
			@apply w-screen h-screen mx-auto;
			border-radius: 0 !important;
		}
	}

	.modal-center,
	.modal-dialog,
	.modal-top,
	.modal-top-right,
	.modal-bottom,
	.modal-bottom-right,
	.modal-right,
	.modal-full-right,
	.modal-left,
	.modal-full-left {
		.modal-box {
			@apply min-w-[300px] md:min-w-[400px];
			max-width: 600px;
		}
	}

	.modal-center {
		@apply p-2 md:p-4 lg:p-5 justify-center shadow-border;

		.modal-box {
			max-height: min(500px, 80vh);
		}
	}

	.modal-dialog {
		@apply p-0 justify-center items-end;

		.modal-box {
			@apply !rounded-b-none rounded-t-4xl !shadow-c shadow-brand;
			max-height: min(400px, 70vh);
			max-width: 660px;

			.modal-footer {
				border-bottom-left-radius: 0;
				border-bottom-right-radius: 0;
			}
		}
	}

	.modal-top {
		@apply p-2 md:p-2 lg:p-4 justify-center items-start;

		.modal-box {
			max-height: min(350px, 80vh);
		}
	}

	.modal-top-right {
		@apply p-2 md:p-4 lg:p-5 justify-end items-start;

		.modal-box {
			max-height: min(350px, 80vh);
		}
	}

	.modal-bottom {
		@apply p-2 md:p-2 lg:p-4 justify-center items-end;

		.modal-box {
			max-height: min(400px, 80vh);
		}
	}

	.modal-bottom-right {
		@apply p-2 md:p-4 lg:p-5 justify-end items-end;

		.modal-box {
			max-height: min(500px, 70vh);
		}
	}

	.modal-right {
		@apply p-2 md:p-4 lg:p-5 justify-end;

		.modal-box {}
	}

	.modal-left {
		@apply p-2 md:p-4 lg:p-5 justify-start;

		.modal-box {}
	}

	.modal-full-right {
		@apply justify-end items-stretch;

		.modal-box {
			border-radius: 0 !important;

			.modal-footer {
				border-radius: 0 !important;
			}
		}
	}

	.modal-full-left {
		@apply justify-start items-stretch;

		.modal-box {
			border-radius: 0 !important;
		}
	}

	.backdrop-overlay {
		@apply fixed inset-0 bg-white/50 dark:bg-black/70 lg:hidden backdrop-blur-sm transition-opacity;
		@apply fixed inset-0 pointer-events-none bg-white/70 dark:bg-dark/70;
		z-index: 910;
	}

	.toast {
		opacity: 0;
		scale: 0.90;
		@apply pl-2.5 pt-3 pb-3.5 pr-2 break-words pointer-events-auto absolute shadow-lg overflow-hidden transition-all;
		border-width: 1px;
		border-radius: calc(var(--box-radius) * 0.6);
		pointer-events: all;
		animation: toast-pop 1s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
		z-index: 99999;
		transition-property: all;
		transition-duration: 600ms;
		width: 98%;

		.toast-close {
			@apply ml-1 rounded-full flex justify-center items-center cursor-pointer leading-none;
			@apply opacity-80 hover:opacity-100 border border-light;
			width: 20px;
			height: 20px;

			svg {
				width: 16px;
				height: 16px;
			}
		}

		.btn {
			@apply px-2;
			border-width: 0px !important;
		}

		.btn-toast {
			@apply btn_default font-normal px-2 py-1 shadow-xs;
			border-radius: calc(var(--btn-radius) * 1.5);
		}

		.toast-progress {
			@apply absolute bg-black rounded-full h-1;
			opacity: 0.2;
			left: 0;
			right: 0;
			bottom: 0;

			div {
				@apply bg-white h-1 transition-all duration-300;
				width: 0%;
			}
		}
	}
}